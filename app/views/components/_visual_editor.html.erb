<%
  id ||= "#{name}-#{SecureRandom.hex(4)}"
  error_items ||= nil
  right_to_left ||= false
  rows ||= 20
  value ||= nil

  data_attributes ||= {}
  data_attributes[:module] ||= ""
  data_attributes[:module] << "visual-editor"

  error_class = "govuk-form-group--error" if error_items
%>

<%= tag.div class: error_class, data: data_attributes do %>
  <div class="app-c-visual-editor__textarea-wrapper">
    <%= render "govuk_publishing_components/components/textarea", {
      name: name,
      id: id,
      label: label,
      rows: rows,
      value: value,
      error_items: error_items,
      margin_bottom: 0,
      right_to_left: right_to_left,
      right_to_left_help: false,
    } %>
  </div>

  <div class="app-c-visual-editor__content">
    <%= govspeak_to_admin_html value, [], [], nil %>
  </div>

  <div class="app-c-visual-editor__container"></div>
<% end %>

<%= javascript_include_tag "components/visual-editor", :type => "module" %>
